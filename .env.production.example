# ================================
# CONFIGURACIÓN PARA PRODUCCIÓN
# ================================
# Este archivo contiene las variables de entorno recomendadas para EasyPanel

# Aplicación
APP_NAME="API Facturación SUNAT"
APP_ENV=production
APP_KEY=
APP_DEBUG=false
APP_URL=https://tu-dominio.com

APP_LOCALE=es
APP_FALLBACK_LOCALE=es
APP_FAKER_LOCALE=es_PE

APP_MAINTENANCE_DRIVER=file

BCRYPT_ROUNDS=12

# Logs
LOG_CHANNEL=stack
LOG_STACK=daily
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=info

# Base de Datos (para EasyPanel con MySQL)
DB_CONNECTION=mysql
DB_HOST=facturacion-sunat-db
DB_PORT=3306
DB_DATABASE=facturacion_sunat
DB_USERNAME=sunat_user
DB_PASSWORD=CAMBIAR_PASSWORD_SEGURO

# Sesiones y Caché (usando Redis)
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_ENCRYPT=true
SESSION_PATH=/
SESSION_DOMAIN=null

BROADCAST_CONNECTION=log
FILESYSTEM_DISK=local
QUEUE_CONNECTION=redis

CACHE_STORE=redis
CACHE_PREFIX=sunat_cache_

# Redis (para EasyPanel)
REDIS_CLIENT=phpredis
REDIS_HOST=facturacion-sunat-redis
REDIS_PASSWORD=null
REDIS_PORT=6379

# Email (configurar según tu proveedor)
MAIL_MAILER=smtp
MAIL_SCHEME=null
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=tu_email@gmail.com
MAIL_PASSWORD=tu_password_email
MAIL_FROM_ADDRESS="noreply@tuempresa.com"
MAIL_FROM_NAME="${APP_NAME}"
MAIL_ENCRYPTION=tls

# AWS S3 (opcional, para almacenar archivos en la nube)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

# Sanctum - Autenticación API
SANCTUM_STATEFUL_DOMAINS=tu-dominio.com,api.tu-dominio.com
SANCTUM_EXPIRATION=1440
SANCTUM_TOKEN_PREFIX=sunat_prod_
SANCTUM_VERIFY_IP=true
SANCTUM_LOG_USAGE=true
SANCTUM_MAX_INACTIVITY=120
SANCTUM_MAX_TOKENS=5
SANCTUM_ROTATE_TOKENS=true
SANCTUM_PURGE_DAYS=30

# ================================
# CONFIGURACIÓN SUNAT
# ================================

# Ambiente SUNAT
# beta = Ambiente de pruebas (https://e-beta.sunat.gob.pe)
# production = Ambiente de producción (https://e-factura.sunat.gob.pe)
SUNAT_ENVIRONMENT=beta

# Certificado Digital SUNAT (.pfx)
SUNAT_CERTIFICATE_PATH=/var/www/html/storage/certificates/certificado.pfx
SUNAT_CERTIFICATE_PASSWORD=password_del_certificado

# Llave Privada (opcional, si usas archivo separado)
SUNAT_PRIVATE_KEY_PATH=

# Credenciales SOL (Usuario Secundario SUNAT)
# Formato: RUC + Usuario SOL
# Ejemplo: 20123456789MODDATOS
SUNAT_SOL_USER=
SUNAT_SOL_PASS=

# URLs de SUNAT (no cambiar a menos que SUNAT actualice)
SUNAT_BETA_URL=https://e-beta.sunat.gob.pe/ol-ti-itcpfegem-beta/billService
SUNAT_PRODUCTION_URL=https://e-factura.sunat.gob.pe/ol-ti-itcpfegem/billService
SUNAT_API_URL=https://api-cpe.sunat.gob.pe/v1
SUNAT_CONSULTA_URL=https://e-factura.sunat.gob.pe/ol-ti-itconsvalicpe/consultaCPE

# Configuración de Certificado (avanzado)
SUNAT_CERT_VERIFY=true
SUNAT_CERT_VERIFY_PEER=true

# ================================
# CONFIGURACIÓN DE ARCHIVOS
# ================================

# Rutas de almacenamiento
FILES_STORAGE_PATH=storage/app/sunat
FILES_STORAGE_XML=storage/app/public/xml
FILES_STORAGE_PDF=storage/app/public/pdf
FILES_STORAGE_CDR=storage/app/public/cdr

# Tamaño máximo de archivos (en KB)
FILES_MAX_SIZE=10240

# Retención de archivos (en días)
FILES_RETENTION_DAYS=365

# ================================
# CONFIGURACIÓN DE FACTURACIÓN
# ================================

# Prefijos y formatos
INVOICE_SERIE_PREFIX=F
BOLETA_SERIE_PREFIX=B
NOTA_CREDITO_PREFIX=NC
NOTA_DEBITO_PREFIX=ND

# Moneda por defecto
DEFAULT_CURRENCY=PEN

# IGV (Impuesto General a las Ventas) - Perú 18%
DEFAULT_IGV_RATE=18

# ICBPER (Impuesto al consumo de bolsas plásticas) - Perú S/ 0.50
DEFAULT_ICBPER_AMOUNT=0.50

# ================================
# CONFIGURACIÓN DE SEGURIDAD
# ================================

# CORS (si usas desde frontend)
CORS_ALLOWED_ORIGINS=https://tu-dominio.com,https://app.tu-dominio.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With
CORS_EXPOSED_HEADERS=
CORS_MAX_AGE=3600
CORS_SUPPORTS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60

# ================================
# CONFIGURACIÓN DE QUEUE/WORKERS
# ================================

# Número de workers (ajustar según recursos del servidor)
QUEUE_WORKERS=2

# Timeout para jobs (en segundos)
QUEUE_TIMEOUT=300

# Reintentos para jobs fallidos
QUEUE_RETRIES=3

# ================================
# VITE (Frontend Assets)
# ================================

VITE_APP_NAME="${APP_NAME}"

# ================================
# CONFIGURACIÓN ADICIONAL
# ================================

# Zona horaria
APP_TIMEZONE=America/Lima

# Modo de mantenimiento
APP_MAINTENANCE_STORE=database

# Health Check
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/api/health
